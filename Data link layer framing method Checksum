#include <stdio.h>
#include <string.h>
unsigned char sum(char *s) {
    int t = 0;
    while (*s) t += *s++;
    return t % 256;
}
int main() {
    char d[100], r[100];
    unsigned char f[110];
    int n;
    printf("Data: ");
    scanf("%s", d);
    n = strlen(d);
    f[0] = 0x7E;
    memcpy(f + 1, d, n);
    f[n + 1] = sum(d);
    f[n + 2] = 0x7F;
    printf("Frame: ");
    for (int i = 0; i < n + 3; i++) printf("%02X ", f[i]);
    printf("\n");
    if (f[0] == 0x7E && f[n + 2] == 0x7F && f[n + 1] == sum(d)) {
        memcpy(r, f + 1, n);
        r[n] = '\0';
        printf("Recv: %s\nOK\n", r);
    } else printf("Error!\n");
}
 printf("No error detected in frame.\n");
    }
    return 0;
}
